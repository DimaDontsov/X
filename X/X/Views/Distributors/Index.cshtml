
@{
    ViewBag.Title = "View";
    var settings = new Newtonsoft.Json.JsonSerializerSettings();
    settings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;

    var loggedUser = Newtonsoft.Json.JsonConvert.SerializeObject(TempData["LoggedUser"], settings);

    int stop = 2;
}

<script>

    loggedUser = @Html.Raw(Json.Encode(loggedUser)); 
    //@Html.Raw(Json.Encode(loggedUser));
    loggedUser = JSON.parse(loggedUser);
    if (loggedUser != null) {
        sessionStorage.setItem("loggedUserId", loggedUser.Id);
        loggedUserId = loggedUser.Id;
    } else {
        loggedUserId = sessionStorage.getItem("loggedUserId");
    }
</script>


<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript">
</script>



@*
    <div id="v-distributor-page">
        <h1> {{Mess}}</h1>
        <div class="menu">
            <ul>
                <li> {{ User.Name }}</li>
                <li> {{ User.Balance}} </li>
            </ul>
            <ul>
                <li><a href="#">Покинуть аккаунт</a></li>
            </ul>
        </div>

        <div class="center_content">
            <div>
                <div class="contentStyle">
                    <table class="table_col scrolling-table" width="360px" height="400" style="background-color:#e9e5e2;">
                        <colgroup>
                            <col style="background:#999999;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th>Цена</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="pack in Packs">
                                <th>{{pack.DrugName}}</th>
                                <th>{{pack.Count + " " + pack.UnitsOfMeasurement }}</th>
                                <th class="btn">Найти</th>
                            </tr>

                        </tbody>
                    </table>
                </div>
                <div class="contentStyle pressX">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d336639.7134787372!2d44.52593357421873!3d48.76283905234407!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sru!2sru!4v1524432095300" width="550" height="400" frameborder="0" style="border:0" allowfullscreen></iframe>
                </div>
            </div>
            <div style="margin-top:30px;">
                <div class="styled-select">
                    <label for="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Сортировка</label>
                    <select name="sort">
                        <option>По возрастанию цены</option>
                        <option>Ебать-копать</option>
                    </select>
                </div>

                <div>
                    <div class="contentStyle">
                        <table class="table_col scrolling-table" height="200" style="background-color:#e9e5e2;">
                            <colgroup>
                                <col style="background:#999999;">
                            </colgroup>
                            <thead>
                                <tr>
                                    <th>Название</th>
                                    <th>Стоимость</th>
                                    <th>Количество</th>
                                    <th>Продавец</th>
                                    <th>Время доставки</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Дима пидор</th>
                                    <th>даром</th>
                                    <th>2 шт.</th>
                                    <th>Санек</th>
                                    <th>пулей</th>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                    <div class="contentStyle pressX">
                        <div class="styled-select" style="margin-right:5px;">
                            <label for="sort">&nbsp;&nbsp;Товар</label>
                            <select name="sort">
                                <option>Марьванна</option>
                                <option>Ебать-копать</option>
                            </select>
                        </div>
                        <div align="right">
                            <label>Вес</label>
                            <input type="text"></input>
                        </div>
                        <div align="right">
                            <label>&nbsp;&nbsp;Стоимость</label>
                            <input type="text"></input>
                        </div>
                        <div align="center">
                            <input type="button" value="Купить&nbsp;&nbsp;" style="width:30%; background-color:#C0C0C0;">
                            <input type="button" value="Отмена&nbsp;&nbsp;" style="width:30%; background-color:#C0C0C0;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    @Scripts.Render("~/scripts/Distributors/Distributor.js")
    <script>
        //vDistributorPage.setUserId(loggedUserId);
    </script>*@


<div id="v-distributor-page">
    <div id="main_container">
        <div class="menu">
            <ul>
                <li> {{User.Name}}</li>
                <li> {{User.Balance}}</li>
            </ul>
            <ul>
                <li><a href="~/Authorization/">Покинуть аккаунт</a></li>
            </ul>
        </div>
        <div class="center_content">
            <div>
                <div class="contentStyle">
                    <table class="table_col scrolling-table" height="400" style="background-color:#e9e5e2;">
                        <colgroup>
                            <col style="background:#999999;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th>Кол-во </th>
                                <th>Цена</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="pack in Packs">
                                <th v-on:click ="showPack(pack.Id)">
                                    {{ pack.DrugName }}
                                </th>
                                <th>
                                    {{ "" + pack.Count + " " + pack.UnitsOfMeasurement}}
                                </th>
                                <th>
                                    {{ "" + pack.Price}}
                                </th>
                                <th>
                                    <button class="btn" v-on:click="returnPack(pack.Id)">Вернуть</button>
                                </th>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="contentStyle pressX">
                    <div id="map" style="width: 600px; height: 400px"></div>
               </div>
            </div>
            <div style="margin-top:30px;">
                <div>
                    <div class="contentStyle">
                        <table class="table_col scrolling-table" height="200" style="background-color:#e9e5e2;">
                            <colgroup>
                                <col style="background:#999999;">
                            </colgroup>
                            <thead>
                                <tr>
                                    <th>Название</th>
                                    <th>Кол-во </th>
                                    <th>Цена </th>
                                    <th>Продавец </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="suply in DrugSuplies">
                                    <th> {{suply.DrugName}}</th>
                                    <th> {{"" + suply.Count + " " + suply.UnitsOfMeasurementName}}</th>
                                    <th> {{suply.Price}}</th>
                                    <th> {{suply.DrugSuplierName }}</th>
                                    <th> <button class="btn" v-on:click="buySuply(suply.Id)">Купить</button></th>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                    <div class="contentStyle pressX">
                        <div id="add-pack-menu" v-show="isAddPack">
                            <label> Сделать закладку</label>
                            <div>
                                <div class="styled-select" style="margin-right:5px;">
                                    <label for="sort"> Из партии:</label>
                                    <select name="sort" v-model="packSuplyId">
                                        <option v-for="s in MyDrugSuplies" :value="s.Id"> {{"" + s.Drug.Name + " " + s.Count + " " + s.UnitsOfMeasurementName }}</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label>Сколько:</label>
                                <input type="text" v-model="packDrugsCount" />
                                <div class="styled-select" style="margin-right:5px; display:inline;">
                                    <label v-if="packSuply !== null"> {{ packSuply.UnitsOfMeasurementName}} </label>
                                </div>
                            </div>
                            <div>
                                <label>Стоимость:</label>
                                <input type="text" v-model="packPrice" />
                            </div>
                            <div align="center">
                                <input type="button" value="Добавить" v-on:click="addDragPack()" style="width:30%; background-color:#C0C0C0;" />
                                <input type="button" value="Отмена" v-on:click="cancelAddPack()" style="width:30%; background-color:#C0C0C0;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
    
@Scripts.Render("~/scripts/Distributors/Distributor.js")
